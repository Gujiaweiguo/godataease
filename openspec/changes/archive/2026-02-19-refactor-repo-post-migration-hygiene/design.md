## Context

- 当前主结构已切换为 `apps/ + legacy/ + infra/`。
- 仓库根仍存在历史运行时目录、过时文档路径和资产归属不清问题。
- 用户确认本次采用激进清理策略，不拆分二期。

## Goals / Non-Goals

- Goals:
  - 移除根目录冗余与历史临时产物
  - 统一开发、构建、部署文档与脚本入口
  - 明确大体量资产目录的归属（保留/迁移/删除）
  - 降低新人误用旧路径的概率
- Non-Goals:
  - 不引入新业务能力
  - 不修改 API 业务语义
  - 不改变已发布兼容契约的行为

## Decisions

- Decision: 对无引用的历史目录执行删除，而非继续保留
  - Why: 减少歧义和维护成本
- Decision: 对仍有价值但位置不合理的资产执行迁移到新拓扑
  - Why: 保留必要资产同时保证目录语义一致
- Decision: 所有清理动作必须通过“引用扫描 + 命令级验证”后生效
  - Why: 避免误删导致运行时回归

## Risks / Trade-offs

- 风险: 误删静态资源导致页面功能缺失
  - Mitigation: 先扫描引用，再迁移/删除，执行前后 smoke 比对
- 风险: 文档批量替换遗漏关键路径
  - Mitigation: 增加旧路径扫描门禁并将文档纳入回归
- 风险: Java 备份依赖目录被误清理
  - Mitigation: `legacy/` 下资产优先迁移，不直接删除

## Migration Plan

1. 做资产审计（引用、用途、是否运行时必需）
2. 执行目录清理与迁移（分组提交）
3. 修复构建/部署入口与脚本
4. 全量修正文档与指南
5. 执行 tests-after 与门禁扫描

## Rollback Plan

- 保留清理前清单与 git 回滚点
- 任一关键验证失败时按分组回滚（资产组/文档组/脚本组）

## Open Questions

- 无阻塞问题，进入执行阶段。
